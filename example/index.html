<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>webECS Examples</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; height: 100vh; display: flex; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .sidebar { width: 260px; border-right: 1px solid #e5e7eb; padding: 12px; overflow: auto; }
    .title { font-weight: 700; margin: 4px 0 12px; }
    .menu { list-style: none; padding: 0; margin: 0; }
    .menu button {
      width: 100%; text-align: left; padding: 10px 12px; margin: 4px 0;
      border: 1px solid #e5e7eb; background: #fff; border-radius: 8px; cursor: pointer;
    }
    .menu button.active { border-color: #2563eb; }
    .content { flex: 1; display: flex; flex-direction: column; }
    .topbar { padding: 10px 12px; border-bottom: 1px solid #e5e7eb; font-size: 14px; color: #374151; }
    iframe { flex: 1; width: 100%; border: 0; }
  </style>
</head>

<body>
  <aside class="sidebar">
    <div class="title">webECS 示例</div>
    <ul class="menu" id="menu"></ul>
  </aside>

  <main class="content">
    <div class="topbar" id="current"></div>
    <iframe id="frame" title="example"></iframe>
  </main>

  <script>
    const pages = [
      { key: 'circle', label: 'Circle（圆 / 椭圆 / 圆弧）', src: './pages/circle.html' },
      { key: 'rect', label: 'Rect（矩形）', src: './pages/rect.html' },
      { key: 'line', label: 'Line（线段）', src: './pages/line.html' },
      { key: 'point', label: 'Point（点）', src: './pages/point.html' },
      { key: 'polyline', label: 'Polyline（折线/多边形）', src: './pages/polyline.html' },
      { key: 'curve', label: 'Curve（贝塞尔曲线）', src: './pages/curve.html' },
      { key: 'image', label: 'Image（图片）', src: './pages/image.html' },
      { key: 'text', label: 'Text（MSDF 文本）', src: './pages/text.html' },
      { key: 'drag', label: 'Feature：Drag（拖拽图形）', src: './feature/drag.html' },
    ];

    const menu = document.getElementById('menu');
    const frame = document.getElementById('frame');
    const current = document.getElementById('current');

    function setActive(key) {
      const page = pages.find(p => p.key === key) || pages[0];
      frame.src = page.src;
      current.textContent = page.label;
      for (const btn of menu.querySelectorAll('button')) {
        btn.classList.toggle('active', btn.dataset.key === page.key);
      }
      history.replaceState(null, '', `#${page.key}`);
    }

    for (const p of pages) {
      const li = document.createElement('li');
      const btn = document.createElement('button');
      btn.textContent = p.label;
      btn.dataset.key = p.key;
      btn.addEventListener('click', () => setActive(p.key));
      li.appendChild(btn);
      menu.appendChild(li);
    }

    const initial = (location.hash || '').slice(1);
    setActive(initial);
  </script>
</body>

</html>
