<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>折线渲染测试 - 开放 / 闭合 / 点击</title>
</head>

<body>
  <div id="app">
    <h2>Polyline 节点测试</h2>
    <div id="game-container">
      <canvas id="game-canvas" width="1200" height="800" style="border: 1px solid #000;"></canvas>
    </div>
  </div>

  <script type="module">
    import { engine, bindEvent, Transform } from './utils.js';
    import { PolylineApi } from './utils.js';

    const canvas = document.getElementById("game-canvas");

    async function main() {
      /** ✅ 折线示例 1：开放路径 */
      const line1 = PolylineApi(
        { x: 200, y: 150 },
        {
          points: [
            [0, 0],
            [100, 50],
            [180, 0],
            [240, 80],
          ],
          strokeStyle: "#e74c3c",
          lineWidth: 4,
          closed: false,
        }
      );
      const e1 = bindEvent(line1);
      e1.on("click", () => console.log("点击了开放折线"));

      /** ✅ 折线示例 2：闭合多边形 */
      const line2 = PolylineApi(
        { x: 600, y: 200 },
        {
          points: [
            [0, 0],
            [100, 0],
            [80, 80],
            [20, 100],
          ],
          closed: true,
          strokeStyle: "#2980b9",
          fillStyle: "rgba(52, 152, 219, 0.3)",
          lineWidth: 3,
        }
      );
      const e2 = bindEvent(line2);
      e2.on("click", () => console.log("点击了闭合多边形"));

      /** ✅ 折线示例 3：旋转测试 */
      const line3 = PolylineApi(
        { x: 950, y: 300, rotation: Math.PI / 6, scaleX: 1.5, scaleY: 1.5 },
        {
          points: [
            [0, 0],
            [60, -40],
            [120, 0],
            [100, 80],
            [20, 100],
          ],
          closed: true,
          strokeStyle: "#27ae60",
          fillStyle: "rgba(39, 174, 96, 0.3)",
          lineWidth: 3,
        }
      );
      const e3 = bindEvent(line3);
      e3.on("click", () => console.log("点击了旋转折线"));

      // 加入 ECS 引擎
      engine.add(line1);
      engine.add(line2);
      engine.add(line3);

      // 启动引擎
      engine.start();
    }

    main();
  </script>
</body>

</html>
